<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Askel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      background: #000;
      color: #fff;
      font-family: 'Inter', system-ui, sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    /* Canvas background */
    #stair-canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    /* Language toggle */
    .lang-toggle {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 0.25rem;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      font-family: 'Inter', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      transition: border-color 0.3s ease;
    }

    .lang-toggle:hover {
      border-color: rgba(255, 255, 255, 0.5);
    }

    .lang-option {
      color: #fff;
      opacity: 0.4;
      transition: opacity 0.2s;
    }

    .lang-option.active {
      opacity: 1;
    }

    .lang-divider {
      color: #fff;
      opacity: 0.3;
    }

    /* Back button */
    .back-btn {
      position: fixed;
      top: 1.5rem;
      left: 1.5rem;
      z-index: 100;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      padding: 0.5rem 0.75rem;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, border-color 0.3s ease;
    }

    .back-btn:hover {
      border-color: rgba(255, 255, 255, 0.5);
    }

    body.in-section .back-btn {
      opacity: 1;
      pointer-events: auto;
    }

    /* Views container */
    .views {
      position: fixed;
      inset: 0;
      z-index: 10;
    }

    .view {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.8s cubic-bezier(0.65, 0, 0.35, 1);
    }

    .view.landing {
      align-items: flex-start;
      padding: 0 12vw;
    }

    .view.section {
      align-items: flex-start;
      padding: 0 12vw;
      transform: translateX(100%);
      opacity: 0;
      pointer-events: none;
    }

    .view.section.active {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }

    .view.landing.hidden {
      transform: translateX(-100%);
      opacity: 0;
      pointer-events: none;
    }

    /* Landing content */
    .landing-content {
      display: flex;
      flex-direction: column;
    }

    .logo {
      font-size: clamp(3rem, 8vw, 5rem);
      font-weight: 300;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }

    .tagline {
      font-size: clamp(0.9rem, 1.5vw, 1.1rem);
      font-weight: 300;
      opacity: 0.5;
      margin-bottom: 3rem;
      letter-spacing: 0.02em;
    }

    /* Landing nav items */
    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .nav-item {
      font-size: clamp(1.5rem, 4vw, 2.5rem);
      font-weight: 300;
      letter-spacing: 0.02em;
      color: #fff;
      opacity: 0.7;
      cursor: pointer;
      transition: opacity 0.3s ease;
      background: none;
      border: none;
      text-align: left;
      font-family: inherit;
      padding: 0;
    }

    .nav-item:hover {
      opacity: 1;
    }

    /* Section content */
    .section-content {
      max-width: 600px;
    }

    .section-content h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 300;
      letter-spacing: 0.02em;
      margin-bottom: 1.5rem;
      line-height: 1.2;
    }

    .section-content p {
      font-size: clamp(1rem, 1.5vw, 1.2rem);
      font-weight: 300;
      line-height: 1.7;
      opacity: 0.75;
      margin-bottom: 2.5rem;
    }

    .cta {
      display: inline-block;
      padding: 1rem 2rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      color: #fff;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 400;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      transition: all 0.3s ease;
    }

    .cta:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.5);
    }

    /* Mobile */
    @media (max-width: 768px) {
      .lang-toggle,
      .back-btn {
        top: 1rem;
        padding: 0.4rem 0.6rem;
        font-size: 0.6rem;
      }

      .lang-toggle {
        right: 1rem;
      }

      .back-btn {
        left: 1rem;
      }

      .view.landing,
      .view.section {
        padding: 0 8vw;
      }

      .nav-list {
        gap: 1.25rem;
      }

      .section-content h1 {
        margin-bottom: 1rem;
      }

      .section-content p {
        margin-bottom: 2rem;
      }

      .cta {
        padding: 0.85rem 1.5rem;
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <canvas id="stair-canvas"></canvas>

  <button class="lang-toggle" id="lang-toggle">
    <span class="lang-option active" data-lang="fi">FI</span>
    <span class="lang-divider">/</span>
    <span class="lang-option" data-lang="en">EN</span>
  </button>

  <button class="back-btn" id="back-btn" data-i18n="back">Takaisin</button>

  <div class="views">
    <!-- Landing -->
    <div class="view landing" id="landing">
      <div class="landing-content">
        <h1 class="logo">Askel</h1>
        <p class="tagline" data-i18n="tagline">Uusi pääomasijoitusyhtiö</p>
        <nav class="nav-list">
          <button class="nav-item" data-section="investors" data-i18n="nav.investors">Sijoittajille</button>
          <button class="nav-item" data-section="businesses" data-i18n="nav.businesses">Yrityksille</button>
          <button class="nav-item" data-section="operators" data-i18n="nav.operators">Operaattoreille</button>
        </nav>
      </div>
    </div>

    <!-- Investors -->
    <div class="view section" id="investors">
      <div class="section-content">
        <h1 data-i18n="investors.title">Pitkajänteistä pääomaa</h1>
        <p data-i18n="investors.desc">Rakennamme kestävää arvoa yhdessä. Tarjoamme institutionaalisille sijoittajille ja perhetoimistoille mahdollisuuden osallistua pitkäaikaiseen arvonluontiin.</p>
        <a href="mailto:hello@askel.fi" class="cta" data-i18n="cta">Ota yhteyttä</a>
      </div>
    </div>

    <!-- Businesses -->
    <div class="view section" id="businesses">
      <div class="section-content">
        <h1 data-i18n="businesses.title">Kumppani kasvuun</h1>
        <p data-i18n="businesses.desc">Autamme yrityksiä ottamaan seuraavan askeleen. Tuomme mukaan pääomaa, osaamista ja pitkäjänteisen näkemyksen liiketoiminnan kehittämiseen.</p>
        <a href="mailto:hello@askel.fi" class="cta" data-i18n="cta">Ota yhteyttä</a>
      </div>
    </div>

    <!-- Operators -->
    <div class="view section" id="operators">
      <div class="section-content">
        <h1 data-i18n="operators.title">Rakenna kanssamme</h1>
        <p data-i18n="operators.desc">Etsimme osaavia johtajia portfolioyhtiöihimme. Tarjoamme mahdollisuuden todelliseen omistajuuteen ja merkitykselliseen työhön.</p>
        <a href="mailto:hello@askel.fi" class="cta" data-i18n="cta">Ota yhteyttä</a>
      </div>
    </div>
  </div>

  <script>
    // ============ STAIR ANIMATION ============
    const canvas = document.getElementById('stair-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;

    // Stair path configuration
    const stairConfig = {
      stepWidth: 60,
      stepHeight: 50,
      steps: 10,
      lineSpeed: 2,
      lineLength: 150,
      strokeWidth: 2
    };

    // Single line state
    let line = {
      head: 0,      // Head position along path
      tail: 0,      // Tail position (starts same as head, grows)
      phase: 'growing'  // 'growing', 'moving', 'shrinking'
    };

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
      initStairPath();
    }

    // Build the stair path as an array of points
    let stairPath = [];
    let totalPathLength = 0;

    function initStairPath() {
      stairPath = [];

      // Position stairs on the right side, vertically centered
      const startX = width * 0.92;
      const startY = height * 0.75;

      // Calculate step dimensions based on screen
      const stepW = Math.min(stairConfig.stepWidth, width * 0.06);
      const stepH = Math.min(stairConfig.stepHeight, height * 0.08);
      const steps = stairConfig.steps;

      // Build path going up-left (ascending stairs)
      let x = startX;
      let y = startY;

      stairPath.push({ x, y });

      for (let i = 0; i < steps; i++) {
        // Vertical rise
        y -= stepH;
        stairPath.push({ x, y });
        // Horizontal tread (going left)
        x -= stepW;
        stairPath.push({ x, y });
      }

      // Calculate cumulative distances
      totalPathLength = 0;
      for (let i = 1; i < stairPath.length; i++) {
        const dx = stairPath[i].x - stairPath[i-1].x;
        const dy = stairPath[i].y - stairPath[i-1].y;
        totalPathLength += Math.sqrt(dx * dx + dy * dy);
      }

      // Reset line state
      line = { head: 0, tail: 0, phase: 'growing' };
    }

    // Get point along the stair path at a given distance (clamped, not wrapped)
    function getPointAtDistance(distance) {
      distance = Math.max(0, Math.min(distance, totalPathLength));

      let accumulated = 0;
      for (let i = 1; i < stairPath.length; i++) {
        const dx = stairPath[i].x - stairPath[i-1].x;
        const dy = stairPath[i].y - stairPath[i-1].y;
        const segmentLength = Math.sqrt(dx * dx + dy * dy);

        if (accumulated + segmentLength >= distance) {
          const t = (distance - accumulated) / segmentLength;
          return {
            x: stairPath[i-1].x + dx * t,
            y: stairPath[i-1].y + dy * t
          };
        }
        accumulated += segmentLength;
      }

      return stairPath[stairPath.length - 1];
    }

    function drawLine() {
      if (line.head <= line.tail) return;

      ctx.beginPath();
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';
      ctx.lineWidth = stairConfig.strokeWidth;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';

      // Draw from tail to head
      const segments = 40;
      const lineLen = line.head - line.tail;

      for (let i = 0; i <= segments; i++) {
        const d = line.tail + (i / segments) * lineLen;
        const point = getPointAtDistance(d);

        if (i === 0) {
          ctx.moveTo(point.x, point.y);
        } else {
          ctx.lineTo(point.x, point.y);
        }
      }

      ctx.stroke();
    }

    // Ease-in-out function (slow-fast-slow)
    function easeInOut(t) {
      return t < 0.5
        ? 4 * t * t * t
        : 1 - Math.pow(-2 * t + 2, 3) / 2;
    }

    // Animation state
    let animProgress = 0;  // 0 to 1 for full cycle
    const cycleDuration = 7;  // seconds for full cycle
    let lastTime = null;

    function animate(currentTime) {
      if (!lastTime) lastTime = currentTime;
      const deltaTime = (currentTime - lastTime) / 1000;
      lastTime = currentTime;

      ctx.clearRect(0, 0, width, height);

      // Update progress
      animProgress += deltaTime / cycleDuration;
      if (animProgress >= 1) {
        animProgress = 0;
      }

      // Apply easing to get actual position
      const easedProgress = easeInOut(animProgress);

      // Calculate head and tail positions
      const maxLen = stairConfig.lineLength;
      const totalTravel = totalPathLength + maxLen;

      // Head position (starts at 0, ends at totalPathLength)
      const headRaw = easedProgress * totalTravel;
      line.head = Math.min(headRaw, totalPathLength);

      // Tail position (starts at -maxLen, ends at totalPathLength)
      const tailRaw = headRaw - maxLen;
      line.tail = Math.max(tailRaw, 0);

      drawLine();
      requestAnimationFrame(animate);
    }

    // ============ NAVIGATION ============
    const landing = document.getElementById('landing');
    const sections = document.querySelectorAll('.view.section');
    const navItems = document.querySelectorAll('.nav-item');
    const backBtn = document.getElementById('back-btn');
    let currentSection = null;

    function goToSection(sectionId) {
      currentSection = sectionId;
      landing.classList.add('hidden');
      document.getElementById(sectionId).classList.add('active');
      document.body.classList.add('in-section');
    }

    function goToLanding() {
      sections.forEach(s => s.classList.remove('active'));
      landing.classList.remove('hidden');
      document.body.classList.remove('in-section');
      currentSection = null;
    }

    navItems.forEach(item => {
      item.addEventListener('click', () => goToSection(item.dataset.section));
    });

    backBtn.addEventListener('click', goToLanding);

    // Keyboard navigation
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && currentSection) {
        goToLanding();
      }
    });

    // ============ TRANSLATIONS ============
    const translations = {
      fi: {
        'back': 'Takaisin',
        'tagline': 'Uusi pääomasijoitusyhtiö',
        'nav.investors': 'Sijoittajille',
        'nav.businesses': 'Yrityksille',
        'nav.operators': 'Operaattoreille',
        'investors.title': 'Pitkäjänteistä pääomaa',
        'investors.desc': 'Rakennamme kestävää arvoa yhdessä. Tarjoamme institutionaalisille sijoittajille ja perhetoimistoille mahdollisuuden osallistua pitkäaikaiseen arvonluontiin.',
        'businesses.title': 'Kumppani kasvuun',
        'businesses.desc': 'Autamme yrityksiä ottamaan seuraavan askeleen. Tuomme mukaan pääomaa, osaamista ja pitkäjänteisen näkemyksen liiketoiminnan kehittämiseen.',
        'operators.title': 'Rakenna kanssamme',
        'operators.desc': 'Etsimme osaavia johtajia portfolioyhtiöihimme. Tarjoamme mahdollisuuden todelliseen omistajuuteen ja merkitykselliseen työhön.',
        'cta': 'Ota yhteyttä'
      },
      en: {
        'back': 'Back',
        'tagline': 'A new private equity firm',
        'nav.investors': 'For Investors',
        'nav.businesses': 'For Businesses',
        'nav.operators': 'For Operators',
        'investors.title': 'Patient capital',
        'investors.desc': 'We build lasting value together. We offer institutional investors and family offices the opportunity to participate in long-term value creation.',
        'businesses.title': 'Partner for growth',
        'businesses.desc': 'We help companies take the next step. We bring capital, expertise, and a long-term vision for business development.',
        'operators.title': 'Build with us',
        'operators.desc': 'We seek talented leaders for our portfolio companies. We offer the opportunity for true ownership and meaningful work.',
        'cta': 'Get in touch'
      }
    };

    let currentLang = 'fi';

    function setLanguage(lang) {
      currentLang = lang;
      const t = translations[lang];
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.textContent = t[key];
      });
      document.querySelectorAll('.lang-option').forEach(opt => {
        opt.classList.toggle('active', opt.dataset.lang === lang);
      });
      document.documentElement.lang = lang;
      localStorage.setItem('askel-lang', lang);
    }

    document.getElementById('lang-toggle').addEventListener('click', () => {
      setLanguage(currentLang === 'fi' ? 'en' : 'fi');
    });

    // Initialize
    const storedLang = localStorage.getItem('askel-lang');
    setLanguage(storedLang || 'fi');

    // ============ INIT ============
    window.addEventListener('resize', resize);
    resize();
    requestAnimationFrame(animate);
  </script>
</body>
</html>
